!function(t){"function"==typeof define&&define.amd?define("tinymce",t):t()}((function(){"use strict";var t;(t=jQuery)(document).on("click",".wpshop-blockquote",(function(){t(".wpshop-blockquote").removeClass("active"),t(this).addClass("active")})),tinymce.create("tinymce.plugins.blockquote_button_plugin",{init:function(e,a){e.addButton("blockquote_btn",{title:"Добавить блок внимания",onclick:function(){var o=e.selection.getContent({format:"html"}),a=100;0===o.length&&(a=250);var n='<div class="wpshop-blockquote-icons"><span class="wpshop-blockquote wpshop-blockquote--warning" data-type="warning"></span><span class="wpshop-blockquote wpshop-blockquote--question" data-type="question"></span><span class="wpshop-blockquote wpshop-blockquote--danger" data-type="danger"></span><span class="wpshop-blockquote wpshop-blockquote--check" data-type="check"></span><span class="wpshop-blockquote wpshop-blockquote--info" data-type="info"></span><span class="wpshop-blockquote wpshop-blockquote--thumbs-up" data-type="thumbs-up"></span><span class="wpshop-blockquote wpshop-blockquote--thumbs-down" data-type="thumbs-down"></span><span class="wpshop-blockquote wpshop-blockquote--quote" data-type="quote"></span></div>';0===o.length&&(n+='<div class="wpshop-blockquote-textarea"><textarea placeholder="Введите текст">'+o+"</textarea></div>"),e.windowManager.open({title:"Вставить блок внимания",cmd:"blockquote_btn_command",html:n,height:a,buttons:[{text:"OK",subtype:"primary",onclick:function(){var o=t(".wpshop-blockquote.active").data("type"),a=e.selection.getContent({format:"html"});0===a.length&&(a=t(".wpshop-blockquote-textarea textarea").val());var n="<blockquote class='"+o+"'>"+a+"</blockquote>";e.execCommand("mceInsertContent",0,n),tinymce.activeEditor.windowManager.close()}},{text:"Отмена",onclick:"close"}]})}}),e.addButton("content_btn",{title:"Добавить кнопку",image:a+"/../images/admin/tinymce-button.png",onclick:function(){e.windowManager.open({title:"Вставить кнопку",body:[{type:"textbox",name:"text",label:"Текст кнопки"},{type:"textbox",name:"href",label:"Ссылка"},{type:"listbox",name:"hide_link",label:"Скрыть ссылку",values:[{text:"Скрыть",value:"yes"},{text:"Не скрывать",value:"no"}]},{type:"colorbox",name:"background_color",label:"Цвет фона",onaction:o()},{type:"colorbox",name:"color",label:"Цвет текста",onaction:o()},{type:"listbox",name:"size",label:"Размер",values:[{text:"Маленькая",value:"small"},{text:"Средняя",value:"normal"},{text:"Большая",value:"big"}]},{type:"listbox",name:"target",label:"Открыть ссылку",values:[{text:"В этой вкладке",value:"_self"},{text:"В новой вкладке",value:"_blank"}]}],onsubmit:function(t){var o="";0===t.data.text.length&&(t.data.text="Button"),0!==t.data.background_color.length&&(o+=' background_color="'+t.data.background_color+'"'),0!==t.data.color.length&&(o+=' color="'+t.data.color+'"'),e.insertContent('[button href="'+t.data.href+'" hide_link="'+t.data.hide_link+'" '+o+' size="'+t.data.size+'" target="'+t.data.target+'"]'+t.data.text+"[/button]")}})}}),e.addButton("spoiler_btn",{title:"Спойлер",cmd:"spoiler_btn_command",image:a+"/../images/admin/spoiler-ico.png"}),e.addButton("mark_btn",{title:"Выделить текст",image:a+"/../images/admin/tinymce-mark.png",onclick:function(){var o=e.selection.getContent({format:"html"});if(0!==o.length){var a="<mark>"+o+"</mark>";e.execCommand("mceInsertContent",0,a)}else{var n='<div class="wpshop-mark-btn-textarea"><textarea placeholder="Введите текст">'+o+"</textarea></div>";e.windowManager.open({title:"Вставить выделенный текст",cmd:"mark_btn_command",html:n,height:170,buttons:[{text:"OK",subtype:"primary",onclick:function(){if(0!==(o=t(".wpshop-mark-btn-textarea textarea").val()).length){var a="<mark>"+o+"</mark>";e.execCommand("mceInsertContent",0,a)}tinymce.activeEditor.windowManager.close()}},{text:"Отмена",onclick:"close"}]})}}}),e.addButton("mask_link",{title:"Замаскировать ссылку",cmd:"mask_link_command",image:a+"/../images/admin/link.png"}),e.addCommand("mask_link_command",(function(t,o){var a=e.selection.getContent({format:"raw"});if(""!==a){var n=jQuery.trim(prompt("Введите адрес ссылки"));""!==n?e.execCommand("mceInsertContent",0,'[mask_link href="'+n+'" target="_blank"]'+a+"[/mask_link]"):alert("Необходимо указать адрес ссылки")}else alert("Необходимо выделить текст ссылки")})),e.addCommand("spoiler_btn_command",(function(){var t=e.selection.getContent({format:"html"});if(0!==t.length){var o=prompt("Введите заголовок спойлера или оставьте пустым"),a=' title="'+o+'"';0===o.length&&(a=""),e.execCommand("mceReplaceContent",!1,"[spoiler"+a+"]"+t+"[/spoiler]")}else alert("Выделите текст для спойлера")}))},createControl:function(t,e){return null},getInfo:function(){return{longname:"Extra Buttons",author:"WPShop.biz",version:"1"}}}),tinymce.PluginManager.add("blockquote_button_plugin",tinymce.plugins.blockquote_button_plugin);var e=tinymce.activeEditor;function o(){var t=e.settings.color_picker_callback;if(t)return function(){var o=this;t.call(e,(function(t){o.value(t).fire("change")}),o.value())}}}));